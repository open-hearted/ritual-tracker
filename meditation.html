<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç‘æƒ³ãƒˆãƒ©ãƒƒã‚«ãƒ¼</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="style-overrides-meditation.css" />
  <!-- äº’æ›æ€§/ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ç”±æ¥ã® 404 å›é¿ç”¨ï¼ˆstyles.css ã‚’è¦æ±‚ã•ã‚Œã¦ã‚‚åŒã˜å†…å®¹ã‚’æä¾›ï¼‰ -->
  <link rel="stylesheet" href="styles.css" disabled />
  <!-- favicon 404 å›é¿ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰ -->
  <link rel="icon" href="data:,">
  <!-- Supabase JS (ä»»æ„åŒæœŸã§ä½¿ç”¨) ç„¡åŠ¹åŒ–è¦æ±‚ã«ã‚ˆã‚Šã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> -->
  <script defer src="coworking-chekcin.js"></script>
  <style>
    /* ç‘æƒ³ã‚¿ã‚¤ãƒãƒ¼: é–‹å§‹ãƒœã‚¿ãƒ³ã‚’å¤§ãã */
    #medTimerStart{
      padding: 12px 18px;
      font-size: 18px;
      min-height: 44px;      /* ã‚¿ãƒƒãƒ—æ¨å¥¨ã‚µã‚¤ã‚º */
      min-width: 120px;
      border-radius: 12px;
      touch-action: manipulation;
      background: linear-gradient(135deg, #22d3ee, #a78bfa);
      color: #fff;
      border: 0;
      box-shadow: 0 6px 18px rgba(167,139,250,.35), 0 0 0 1px rgba(255,255,255,.08) inset;
    }
    #medTimerStart:hover{
      filter: brightness(1.05);
    }
    #medTimerStart:active{
      transform: translateY(1px);
      filter: brightness(.98);
    }
    #medTimerStart:focus-visible{
      outline: 2px solid #a78bfa;
      outline-offset: 2px;
    }
    #medTimerStart:disabled{
      opacity: .55;
      filter: grayscale(40%);
      cursor: not-allowed;
      box-shadow: none;
    }
    @media (max-width: 480px){
      /* 1è¡Œç›®: [åˆ†å…¥åŠ›][æ®‹ã‚Šæ™‚é–“è¡¨ç¤º][é–‹å§‹] / 2è¡Œç›®: [é–‹å§‹æ™‚åˆ»è¡¨ç¤º] */
      #medTimerBox{
        display: grid;
        grid-template-columns: minmax(72px, 1fr) 1fr auto;
        gap: 6px;
        align-items: center;
      }
      #medTimerMin{ grid-column: 1; }
      #medTimerDisplay{
        grid-column: 2;
        justify-self: center;
        font-variant-numeric: tabular-nums;
      }
      #medTimerStart{
        grid-column: 3;
        width: auto;
        flex: 0 0 auto;
        padding: 14px 18px;
        font-size: 20px;
        align-self: stretch;
      }
      .med-startat{ grid-column: 1 / 3; grid-row: 2; }
      /* ãã®ä»–ã®æ“ä½œãƒœã‚¿ãƒ³ã¯ä¸‹æ®µã«ãƒ•ãƒ«å¹…ã§ä¸¦ã¹ã‚‹ */
      #medTimerPause, #medTimerResume, #medTimerCancel, #medAlarmStop{
        grid-column: 1 / -1;
      }
    }
    /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒç”»é¢å¤–ã«ã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã«ã™ã‚‹ */
    #medEditor{
      max-width: min(96vw, 380px);
      max-height: calc(100vh - 16px);
      overflow: auto;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div class="container compact">

    <div class="card cal-card">
      <div class="grid" id="dowRow"></div>
      <div class="grid" id="calGrid" aria-live="polite"></div>
      <div class="cal-head" style="margin-top:10px;">
        <div class="controls">
          <button id="prevBtn">â—€ å‰æœˆ</button>
          <div class="cal-title" id="monthLabel"></div>
          <button id="nextBtn">æ¬¡æœˆ â–¶</button>
        </div>
      </div>
      <div id="debug" style="margin-top:6px;font-size:11px;color:#ffdede"></div>
      <div class="stats" id="stats"></div>
    </div>

    <div class="top-bar" style="margin-top:12px;">
      <div class="app-title">ç‘æƒ³</div>
      <div class="quick-actions">
      </div>
    </div>

    <div class="card mini" id="s3Card">
      <details>
        <summary>åŒæœŸ</summary>
        <div class="row tight" style="margin-top:4px; gap:6px">
          <input id="s3DocId" placeholder="docId" />
          <span style="display:flex;align-items:center;gap:4px;flex:1;">
            <input id="s3Passphrase" placeholder="E2E pass" type="password" style="flex:1;" />
            <button type="button" id="togglePassMed" title="è¡¨ç¤º/éè¡¨ç¤º" style="padding:2px 6px;font-size:11px;">ğŸ‘</button>
          </span>
          <input id="s3Password" placeholder="APP_PASSWORD" type="password" />
        </div>
        <div class="row tight" style="margin-top:4px; gap:6px">
          <button id="s3Push">ä¿å­˜</button>
          <button id="s3Pull">å¾©å…ƒ</button>
          <label class="auto-restore"><input type="checkbox" id="s3AutoRestore" />è‡ªå‹•</label>
        </div>
        <div id="syncStatus" style="margin-top:6px;font-size:11px;color:#8ab4ff;white-space:pre-line">(sync idle)</div>
      </details>
    </div>
  </div>
  <script>
  // E2E pass è¡¨ç¤ºãƒˆã‚°ãƒ« (ç‘æƒ³ãƒšãƒ¼ã‚¸)
  (function(){
    const btn = document.getElementById('togglePassMed');
    const inp = document.getElementById('s3Passphrase');
    if(btn && inp){
      btn.addEventListener('click', () => {
        const showing = inp.type === 'text';
        inp.type = showing ? 'password' : 'text';
        btn.textContent = showing ? 'ğŸ‘' : 'ğŸ™ˆ';
      });
    }
  })();

  // ã€Œæ—¥ã‚¯ãƒªã‚¢ã€æ©Ÿèƒ½ã®å‰Šé™¤/ç„¡åŠ¹åŒ–ï¼ˆã‚¿ã‚¤ãƒãƒ¼ç­‰ã¯ç¶­æŒï¼‰
  (function(){
    const isClearDayEl = (el)=>{
      if(!(el instanceof Element)) return false;
      const txt = (el.textContent||'').trim();
      const id = el.id||'';
      const cls = el.className||'';
      if (txt === 'æ—¥ã‚¯ãƒªã‚¢') return true;
      if (id === 'medClearDay') return true;
      return /clear[-_\s]?day/i.test(id) || /clear[-_\s]?day/i.test(cls);
    };

    function purge(root=document){
      // å‹•çš„ã«å‡ºã‚‹ã€Œæ—¥ã‚¯ãƒªã‚¢ã€ãƒœã‚¿ãƒ³ã‚’é™¤å»
      root.querySelectorAll('button, [role="button"], #medClearDay, .clear-day').forEach(el=>{
        if (isClearDayEl(el)) el.remove();
      });
      // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‹ã‚‰ã€Œå³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ãƒªã‚¢ã€ã‚’å‰Šé™¤
      document.querySelectorAll('.cell[title]').forEach(c=>{
        c.title = c.title.replace(/\s*\/\s*å³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¯ãƒªã‚¢\s*/g, '');
      });
    }

    // åˆæœŸï¼†å‹•çš„ç›£è¦–
    purge();
    const mo = new MutationObserver(ms=>{
      for(const m of ms){
        m.addedNodes.forEach(n=>{ if(n.nodeType===1) purge(n); });
      }
    });
    mo.observe(document.documentElement,{childList:true,subtree:true});

    // å³ã‚¯ãƒªãƒƒã‚¯ã«ã‚ˆã‚‹å…¨å‰Šé™¤ãƒ–ãƒ­ãƒƒã‚¯ã¯å‰Šé™¤ï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ã§ã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼‰
    // document.addEventListener('contextmenu', (e)=>{
    //   const cell = e.target && e.target.closest && e.target.closest('.cell');
    //   if(cell){ e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation(); }
    // }, true);

    // clearMedDay ãŒã‚ã£ã¦ã‚‚ç„¡åŠ¹åŒ–
    try{ window.clearMedDay = function(){ /* disabled */ }; }catch{}
  })();
  </script>
</body>
</html>

