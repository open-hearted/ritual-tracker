<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ritual Tracker (Today)</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="style-overrides-meditation.css">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script defer src="schedule.js"></script>
  <script defer src="meditation-cloud.js"></script>
  <style>
  /* ä»Šæ—¥ãƒšãƒ¼ã‚¸ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«UIã‚’ãã®ã¾ã¾é€šå¸¸è¡¨ç¤ºã«ã™ã‚‹ */
  #medEditor{ position:static; z-index:auto; left:auto; top:auto; transform:none; background:var(--card,#0b1220); color:#e2e8f0; padding:18px; border-radius:12px; width:min(92vw,680px); display:block; max-height:none; overflow:visible; }
  #medEditor textarea{ width:100%; min-height:100px }
  /* responsive free record row: ensure add button stays visible on small screens */
  #freeRecordRow{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  #freeRecordRow input#freeKorean{ flex:1 1 220px; min-width:0; }
  #freeRecordRow button#freeAdd{ flex:0 0 auto; min-width:44px; }

  /* Generic one-line free record row */
  #freeTextRecordRow{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  #freeTextRecordRow input#freeText{ flex:1 1 220px; min-width:0; }
  #freeTextRecordRow button#freeTextAdd{ flex:0 0 auto; min-width:44px; }
  /* Ensure inputs in the modal are not rendered as password bullets on some mobile browsers */
  #medEditor input, #medEditor textarea { -webkit-text-security: none !important; }
  /* Remove native number input spinners */
  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  input[type=number] { -moz-appearance: textfield; appearance: textfield; -webkit-appearance: textfield; }

  /* Make modal close button clearly distinct from timeline delete buttons */
  #closeEditor{
    background:#2563eb;
    color:#fff;
    border:1px solid rgba(255,255,255,0.18);
    border-radius:999px;
    padding:6px 10px;
    font-weight:700;
    line-height:1;
  }
  #closeEditor:hover{ filter:brightness(1.05); }
  </style>
</head>
<body data-page="daily">
  <div class="top" style="display:flex;align-items:center;gap:12px;padding:12px">
    <div id="gsiButtonContainer"></div>
    <button id="signOutBtn" style="display:none">ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ</button>
    <div style="flex:1"></div>
    <a id="openMonthly" href="monthly.html" target="_blank" rel="noreferrer">æœˆé–“</a>
    <div id="msg" style="color:#6b7280"></div>
  </div>

  <div class="container compact" style="padding:12px;display:flex;justify-content:center">
  <div id="medEditor">
    <div id="editSection" style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
      <strong id="editDate" style="margin-right:8px;">-</strong>
      <div style="display:flex;gap:8px;align-items:center;flex:1;justify-content:center">
        <button data-action="record" data-kind="wake" class="time-btn" style="padding:6px 10px;border-radius:6px">èµ·åºŠ</button>
        <button data-action="record" data-kind="sleep" class="time-btn" style="padding:6px 10px;border-radius:6px">å°±å¯</button>
      </div>
      <button id="closeEditor" type="button" aria-label="é–‰ã˜ã‚‹" style="display:none">é–‰ã˜ã‚‹</button>
    </div>
    
    <!-- ï¼ˆé‡è¤‡ã—ã¦ã„ãŸä¸‹éƒ¨ã®èµ·åºŠ/å°±å¯ãƒœã‚¿ãƒ³ã¯ãƒ˜ãƒƒãƒ€ã«çµ±åˆæ¸ˆã¿ã®ãŸã‚å‰Šé™¤ï¼‰ -->

    <!-- æ™‚åˆ»é †çµ±ä¸€è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆèµ·åºŠãƒ»å°±å¯ã®è¡¨ç¤ºã¨ç·¨é›†æ©Ÿèƒ½ã‚’å«ã‚€ï¼‰ -->
    <div id="allRecordsTimeline" style="margin-bottom:8px;"></div>
    
    <!-- å¾“æ¥ã®å€‹åˆ¥è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆéè¡¨ç¤ºï¼‰ -->
    <div class="med-sessions" id="medSessions" style="display:none;margin-bottom:4px"></div>
    <div id="exerciseList" style="display:none;margin-bottom:4px"></div>
      <div style="margin-bottom:8px;">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <label>æ—¥è¨˜</label>
          <button id="insertTimeBtn" title="ç¾åœ¨æ™‚åˆ»ã‚’æŒ¿å…¥" style="background:transparent;border:none;color:#fff;font-size:18px;line-height:1;padding:4px 6px;">ğŸ•’</button>
        </div>
        <textarea id="medDiaryText" placeholder="ãƒ¡ãƒ¢" style="width:100%;min-height:100px"></textarea>
      </div>
      <!-- è‡ªç”±å…¥åŠ›: ä»–ã®è¨˜éŒ²ã¨åŒã˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¿½åŠ ã§ãã‚‹1è¡Œæ¬„ -->
      <div id="freeRecordRow" style="display:flex;gap:8px;align-items:center;margin-bottom:6px">
    <strong style="width:56px;opacity:0.9">éŸ“å›½èª</strong>
    <input id="freeKorean" name="free_record_korean" type="text" placeholder="å†…å®¹ï¼ˆä¾‹: ì•„ì¹¨ ìš”ê°€ï¼‰" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" inputmode="text" style="flex:1;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff" />
    <label style="display:flex;align-items:center;gap:6px;user-select:none;white-space:nowrap;opacity:0.9" title="ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ä»˜ã‘ã‚‹">
      <input id="freeUseTime" type="checkbox" checked />
      <span aria-label="æ™‚è¨ˆ" style="font-size:18px;line-height:1">ğŸ•’</span>
    </label>
        <button id="freeAdd">è¿½åŠ </button>
      </div>

      <div id="freeTextRecordRow" style="display:flex;gap:8px;align-items:center;margin-bottom:6px">
        <strong style="width:56px;opacity:0.9">è‡ªç”±</strong>
        <input id="freeText" name="free_record_text" type="text" placeholder="å†…å®¹ï¼ˆä¾‹: è²·ã„ç‰© / æƒé™¤ï¼‰" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" inputmode="text" style="flex:1;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff" />
        <label style="display:flex;align-items:center;gap:6px;user-select:none;white-space:nowrap;opacity:0.9" title="ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ä»˜ã‘ã‚‹">
          <input id="freeTextUseTime" type="checkbox" checked />
          <span aria-label="æ™‚è¨ˆ" style="font-size:18px;line-height:1">ğŸ•’</span>
        </label>
        <button id="freeTextAdd">è¿½åŠ </button>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
      </div>

    <div id="exerciseTimers" style="display:flex;flex-direction:column;gap:8px;margin-bottom:4px">
        <div class="exercise-timer" style="display:flex;gap:8px;align-items:center;font-size:13px;padding:4px 0">
          <strong style="width:56px">ãƒ—ãƒ©ãƒ³ã‚¯</strong>
  <input id="plankSec" type="number" min="1" value="30" style="width:4ch;padding:0 4px;text-align:center" /> ç§’
          <span id="plankDisplay" style="min-width:48px;text-align:center">--:--</span>
          <button id="plankStart">é–‹å§‹</button>
        </div>
        <div class="exercise-timer" style="display:flex;gap:8px;align-items:center;font-size:13px;padding:4px 0">
          <strong style="width:56px">ç©ºæ°—æ¤…å­</strong>
  <input id="wallSec" type="number" min="1" value="30" style="width:4ch;padding:0 4px;text-align:center" /> ç§’
          <span id="wallDisplay" style="min-width:48px;text-align:center">--:--</span>
          <button id="wallStart">é–‹å§‹</button>
        </div>
      </div>
      <!-- è¿½åŠ  / æ—¥ã‚¯ãƒªã‚¢ ãƒœã‚¿ãƒ³ã¯ä¸è¦ã®ãŸã‚å‰Šé™¤ -->
    <div class="med-timer" id="medTimerBox" style="margin-bottom:4px;display:flex;gap:8px;align-items:center;font-size:13px;padding:4px 0">
    <strong style="width:56px">ç‘æƒ³</strong>
  <input id="medTimerMin" type="number" min="0.01" step="0.01" value="30" style="width:84px" />
    <span id="medTimerDisplay" style="min-width:56px;text-align:center">--:--</span>
    <button id="medTimerStart">é–‹å§‹</button>
    <!-- ãƒãƒ¼ã‚ºæ™‚ã«è¡¨ç¤ºã™ã‚‹ã‚¯ãƒªã‚¢ï¼ˆç ´æ£„ï¼‰ãƒœã‚¿ãƒ³ -->
    <button id="medTimerClear" style="display:none;padding:6px 8px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.08);">ã‚¯ãƒªã‚¢</button>
  </div>
      
    </div>
  </div>
  </body>
  </html>
