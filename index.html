<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒˆãƒ©ãƒƒã‚«ãƒ¼</title>
  <link rel="stylesheet" href="style.css" />
  <!-- äº’æ›æ€§/ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ç”±æ¥ã® 404 å›é¿ç”¨ï¼ˆstyles.css ã‚’è¦æ±‚ã•ã‚Œã¦ã‚‚åŒã˜å†…å®¹ã‚’æä¾›ï¼‰ -->
  <link rel="stylesheet" href="styles.css" disabled />
  <!-- favicon 404 å›é¿ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰ -->
  <link rel="icon" href="data:,">
  <!-- Supabase JS (ä»»æ„åŒæœŸã§ä½¿ç”¨) ç„¡åŠ¹åŒ–è¦æ±‚ã«ã‚ˆã‚Šã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> -->
  <script defer src="coworking-chekcin.js"></script>
  <style>
    /* index å°‚ç”¨: å†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç„¡åŠ¹åŒ–ã—ã€å³ç«¯(ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ)ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’å‡ºã™ */
    html, #indexPage {
      height: auto !important;
      overflow-y: auto !important;
    }
    #indexPage .container,
    #indexPage .wrap,
    #indexPage .cal-card,
    #indexPage .card {
      height: auto !important;
      max-height: none !important;
      overflow: visible !important;
      scrollbar-gutter: auto !important; /* å­è¦ç´ ã§ã®å†…å´ã‚¬ã‚¿ãƒ¼ã‚’æŠ‘æ­¢ */
    }
  </style>
</head>
<body id="indexPage">
  <div class="container compact">
    <div class="card cal-card">
      <div class="cal-head">
        <div class="controls">
          <button id="prevBtn">â—€ å‰æœˆ</button>
          <div class="cal-title" id="monthLabel"></div>
          <button id="nextBtn">æ¬¡æœˆ â–¶</button>
        </div>
        <div class="legend">
          <span class="badge badge-on"></span> è¡Œã£ãŸ
          <span class="badge badge-off"></span> æœªè¨˜éŒ²
        </div>
      </div>
      <div class="grid" id="dowRow"></div>
      <div class="grid" id="calGrid" aria-live="polite"></div>
      <div id="debug" style="margin-top:6px;font-size:11px;color:#ffdede"></div>
      <div class="stats" id="stats"></div>
    </div>

    <div class="top-bar" style="margin-top:12px;">
      <div class="app-title">å‡ºå¸­</div>
      <div class="quick-actions"></div>
    </div>

    <div class="card mini" id="financeCard">
      <details>
        <summary>ğŸ’° ã‚³ã‚¹ãƒˆè¨ˆç®—</summary>
        <div class="row tight" style="margin-top:4px; gap:6px">
          <input id="feeMonthly" placeholder="æœˆé¡" inputmode="numeric" />
          <input id="priceDay" placeholder="1å›" inputmode="numeric" />
          <input id="costTransit" placeholder="äº¤é€š" inputmode="numeric" />
          <input id="otherPer" placeholder="ä»–" inputmode="numeric" />
          <button id="saveFinance">ä¿å­˜</button>
        </div>
        <div class="stats tiny" id="financeStats"></div>
      </details>
    </div>

    <div class="card mini" id="s3Card">
      <details>
        <summary>åŒæœŸ</summary>
        <div class="row tight" style="margin-top:4px; gap:6px">
          <input id="s3DocId" placeholder="docId"
                 name="docId" autocomplete="section-app username" />
          <span style="display:flex;align-items:center;gap:4px;flex:1;">
            <!-- E2Eã¯åˆ¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³ + åˆæœŸreadonlyã§ã‚ªãƒ¼ãƒˆãƒ•ã‚£ãƒ«æŠ‘æ­¢ -->
            <input id="s3Passphrase" placeholder="E2Eã‚­ãƒ¼" type="text" style="-webkit-text-security: disc; flex:1;"
                   name="e2e-secret" autocomplete="section-e2e new-password" autocapitalize="off" autocorrect="off" spellcheck="false"
                   inputmode="text" aria-autocomplete="none" data-masked="1" data-lpignore="true" data-1p-ignore="true" readonly />
            <button type="button" id="togglePassCw" title="è¡¨ç¤º/éè¡¨ç¤º" style="padding:2px 6px;font-size:11px;">ğŸ‘</button>
          </span>
          <input id="s3Password" placeholder="APP_PASSWORD" type="password"
                 name="app-password" autocomplete="section-app current-password" />
        </div>
        <div class="row tight" style="margin-top:4px; gap:6px">
          <button id="s3Push">ä¿å­˜</button>
          <button id="s3Pull">å¾©å…ƒ</button>
          <label class="auto-restore"><input type="checkbox" id="s3AutoRestore" />è‡ªå‹•</label>
        </div>
        <div id="syncStatus" style="margin-top:6px;font-size:11px;color:#8ab4ff;white-space:pre-line">(sync idle)</div>
      </details>
    </div>
  </div>
  <script>
  // E2E pass è¡¨ç¤ºãƒˆã‚°ãƒ« (index/coworking ãƒšãƒ¼ã‚¸)
  (function(){
    const btn = document.getElementById('togglePassCw');
    const inp = document.getElementById('s3Passphrase');
    if(btn && inp){
      // åˆæœŸã¯ãƒã‚¹ã‚¯ï¼ˆdiscï¼‰ï¼‹ readonlyï¼ˆChromeã‚ªãƒ¼ãƒˆãƒ•ã‚£ãƒ«æŠ‘æ­¢ï¼‰
      inp.style.webkitTextSecurity = 'disc';
      inp.dataset.masked = inp.dataset.masked || '1';
      // åˆå›ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§ readonly ã‚’è§£é™¤ã€blurã§æˆ»ã™
      const removeRO = ()=>{ if(inp.hasAttribute('readonly')) inp.removeAttribute('readonly'); };
      ['focus','pointerdown','keydown','touchstart'].forEach(ev=>{
        inp.addEventListener(ev, removeRO, { once:true });
      });
      inp.addEventListener('blur', ()=>{ inp.setAttribute('readonly','readonly'); });

      btn.addEventListener('click', () => {
        const masked = inp.dataset.masked !== '0';
        if (masked) {
          inp.style.webkitTextSecurity = 'none';
          inp.dataset.masked = '0';
          btn.textContent = 'ğŸ™ˆ';
        } else {
          inp.style.webkitTextSecurity = 'disc';
          inp.dataset.masked = '1';
          btn.textContent = 'ğŸ‘';
        }
      });
    }
  })();
  </script>
</body>
</html>
